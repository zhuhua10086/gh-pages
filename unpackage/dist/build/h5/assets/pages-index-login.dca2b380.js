import{_ as e,v as a,x as s,y as l,o,a as r,w as t,g as i,d as u,f as n,z as m,A as d,B as c,r as p,C as f}from"./index-0570fe52.js";import{_ as g,a as _,b as y,c as V}from"./logo.25c42494.js";import{r as x}from"./uni-app.es.97e83d80.js";import{p as h}from"./index.6b913c1d.js";const w=e({__name:"login",setup(e){const w=a(),k=s(null),j=l({email:"",password:""}),v={email:{rules:[{required:!0,errorMessage:"必填项"},{format:"email",errorMessage:"邮件格式错误"}]}},z=()=>{k.value.validate().then((e=>{h("api/mobile/elogin",j).then((e=>{if(console.log(e),e.success){const a=e.data.userinfo;w.setToken(a.token),w.fillUser(a),m({url:"/pages/my/my"})}})).catch((e=>{console.log(e)}))})).catch((e=>{console.log(e)}))};function C(){d({url:"/pages/index/register",success(e){console.log(e)},fail(e){console.log(e)}})}return(e,a)=>{const s=c,l=i,m=x(p("uni-easyinput"),_),d=x(p("uni-forms-item"),y),h=f,w=x(p("uni-forms"),V);return o(),r(l,null,{default:t((()=>[u(l,{class:"logo"},{default:t((()=>[u(s,{src:g})])),_:1}),u(w,{class:"myForm",ref_key:"myForm",ref:k,modelValue:j,rules:v},{default:t((()=>[u(d,{name:"email"},{default:t((()=>[u(m,{class:"input",modelValue:j.email,"onUpdate:modelValue":a[0]||(a[0]=e=>j.email=e),placeholder:"请输入电子邮箱","suffix-icon":"email"},null,8,["modelValue"])])),_:1}),u(d,{name:"password"},{default:t((()=>[u(m,{class:"input",type:"password",modelValue:j.password,"onUpdate:modelValue":a[1]||(a[1]=e=>j.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),u(h,{type:"primary",onClick:z},{default:t((()=>[n("用户登录")])),_:1}),u(l,{class:"logo-extra"},{default:t((()=>[u(h,{type:"default",size:"mini"},{default:t((()=>[n("忘记密码")])),_:1}),u(h,{type:"default",size:"mini",onClick:C},{default:t((()=>[n("用户注册")])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}}},[["__scopeId","data-v-d2e134e3"]]);export{w as default};
